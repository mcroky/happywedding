<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>💖 Eternal Love Story 💖</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* 로그인 오버레이 스타일 (임베디드, 필요 시 style.css로 이동) */
    #pw-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: #fff;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    .pw-box {
      width: 92%;
      max-width: 420px;
      background: rgba(255,255,255,0.06);
      border-radius: 12px;
      padding: 28px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.7);
      text-align: center;
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .pw-box h2 { margin: 0 0 10px; font-size: 20px; }
    .pw-box p { margin: 0 0 18px; opacity: 0.9; font-size: 14px; }
    .pw-input {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-bottom: 12px;
    }
    .pw-input input[type="password"]{
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.02);
      color: #fff;
      font-size: 16px;
      outline: none;
    }
    .pw-input button{
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      background: rgba(255,255,255,0.12);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
    }
    .pw-error {
      color: #ffb3b3;
      font-size: 13px;
      min-height: 18px;
    }
    .pw-footer { margin-top: 8px; font-size: 12px; opacity: 0.8; }
    /* Accessibility: hidden when unlocked */
    .hidden { display: none !important; }
  </style>
</head>
<body>

<!-- 로그인 오버레이 -->
<div id="pw-overlay" role="dialog" aria-modal="true" aria-labelledby="pw-title">
  <div class="pw-box" role="document">
    <h2 id="pw-title">비밀번호를 입력하세요</h2>
    <p>이 페이지는 비밀번호로 보호되어 있습니다.</p>

    <div class="pw-input">
      <input id="pwField" type="password" aria-label="비밀번호 입력" placeholder="비밀번호">
      <button id="pwSubmit" type="button">입장</button>
    </div>

    <div class="pw-error" id="pwError" aria-live="polite"></div>
    <div class="pw-footer">비밀번호를 잊으셨나요? 관리자에게 문의하세요.</div>
  </div>
</div>

<!-- 🎬 Intro Sequence -->
<div id="intro">
  <canvas id="intro-stars"></canvas>
  <div class="intro-inner">
    <h1 class="intro-title">Eternal Love Story</h1>
    <p class="intro-subtitle">A Journey Written in Time 💫</p>
  </div>
  <canvas id="intro-dissolve"></canvas>  
<!-- 🎞️ 엔딩 자막 -->
<div id="intro-ending-text">
  <span>우</span><span>리</span><span>의</span><span> </span>
  <span>이</span><span>야</span><span>기</span><span>가</span><span> </span>
  <span>지</span><span>금</span><span> </span>
  <span>시</span><span>작</span><span>됩</span><span>니</span><span>다</span><span>...</span>
</div>
  <!-- 🌠 자막 주위 반짝이 오라 -->
  <canvas id="ending-stars"></canvas>
</div>

  <!-- 🌠 배경 캔버스 -->
  <canvas id="stars"></canvas>
  <canvas id="petals"></canvas>
  <canvas id="fx"></canvas>
  <canvas id="hearts"></canvas>

  <!-- 🎬 씬 전환 오버레이 & 비네트 -->
  <div id="scene-transition" aria-hidden="true"></div>
  <div id="vignette" aria-hidden="true"></div>

  <!-- 🎵 음악 컨트롤러 -->
  <div class="music-control">
    <button id="musicToggle" title="음악 재생/정지">🎶</button>
  </div>

  <!-- 💍 헤더 -->
  <header>
    <h1>💍 LOVE IN JESUS 💍</h1>
    <nav>
      <a href="#home">Home</a>
      <a href="#story">Story</a>
      <a href="#gallery">Gallery</a>
      <a href="#message">Message</a>
    </nav>
  </header>

  <!-- 💖 Hero Section -->
  <section id="home" class="hero" data-scene="home">
    <div class="hero-inner">
      <h2 class="fade-in">2007년 4월 10일, 우리의 시작</h2>
      <p class="fade-in delay1">그날의 약속이 지금도 세상을 비추고 있습니다 ✨</p>
      <h3 class="fade-in delay2">오늘은 함께한 지 <span id="days"></span>일째 되는 날 💞</h3>
      <a href="#story" class="scroll-btn fade-in delay3">우리의 이야기 보기 ↓</a>
    </div>
  </section>

  <!-- 🌸 Story Section -->
  <section id="story" class="story" data-scene="story">
    <h2 class="section-title">🌸 OUR JOURNEY</h2>
    <div class="timeline">
      <div class="event left"><div class="event-content glass fade">
        <h3>2007</h3><p>첫 만남 — 눈빛이 닿는 순간 세상이 멈췄어요. 저는 그 눈빛,말투,표정을 모두 기억해요. 이날 세상에서 본 사람들중에 가장 예쁜 사람을 만났어요. 내색은 안했지만 너무 성숙하고 예뻐서 어린아이 같은 나와는 절대로 어울리지 않을거라고 생각했어요. 그렇게 우여곡절 끝에 우리의 만남이 시작되었어요. 치마를 입고 지하철을 함께 타고 찬양집회에 갔던 날은 너무 설레었어요. 사귀는건 아니었지만 너무 좋았어요. 이날 이후로 우리는 매일 만났어요. 매일 연락하고 매일 문자하고 매일 뭘하고 있는지 궁금했어요. 그리고 나를 알아주는 마음이 너무 좋았어요. 저는 이 마음이 너무 좋아서 그만 손을 잡고 말았답니다. 함께한 순간들이 나의 머릿속과 마음에 다 있어요. 절대로 잊지 못하는 순간들이 너무 많아요. 매일 퇴근하고 아파트 앞에서 한시간씩 기다릴때 시간이 왜그렇게 안가던지요. 얼마나 설레이던지요. 당신은 정말 나에게 잊을 수 없는 가장 큰 선물이에요.</p></div></div>
	<div class="event right"><div class="event-content glass fade">
        <h3>2008</h3><p>우리에게 어려움이 찾아왔어요. 어려웠지만 그래도 알콩달콩 잘 살았던 것 같아요. 제가 힘들때 떠나지 않고 계속 함께해주었어요. 그덕분에 일어날 수 있었어요. 항상 감사하게 생각해요. 부족하고 연약한 나를 많이 안아줘서 고마워요. 분명히 가장 어려웠던 시기였지만 가장 행복하기도 했어요.^^ 첫째인 은샘이가 태어난 때이기도 해요. 저는 이날 세상을 다 가진 것 같았어요. 너무나 놀랍고 신기하고 꿈만 같았어요.</p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2009</h3><p>우리는 정말 가난했어요! 가난하지만 잘 살았어요. 적은 월급에 힘들었지만 너무 행복했던 것 같아요. 매일같이 야근에 출장에 집에 못들어 오는 날도 많았어요!! 해외에 출장가서는 힘들지 않을까 걱정 많이 했어요! 그런데 대견하게도 첫째 은샘이를 잘 돌봐주면서 열심히 사는 모습이 너무 좋았어요. 은샘이의 첫돌을 잊을 수가 없어요! 주은청설 아파트는 어려운 시절이었지만 잊을 수 없는 추억이 많아요!</p></div></div>
	<div class="event right"><div class="event-content glass fade">
        <h3>2010</h3><p>여전히 가난했어요. 하지만 우리는 행복했어요!! 은샘이를 같이 키우면서 너무 너무 행복한 시간들이었어요! 아이를 키우면서 1년이 어떻게 갔는지도 모르겠어요. 나들이도 참 많이 다녔던 것 같아요!! 어딜 가든 다 좋았어요!!</p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2011</h3><p>우리는 항상 바쁘고 아이 키우느라 바빴지만 매일 매일 소중한 시간을 보냈어요. 둘째 은율이를 낳았어요! 우리는 네 식구가 되었어요!</p></div></div>

	<div class="event left"><div class="event-content glass fade">
        <h3>2012</h3><p>은율이 돌잔치가 생각나네요! 이제는 네 식구가 되어 함께 움직였어요. 아이가 하나가 더 생겨서 서로를 돌아볼 시간은 부족했지만 그래도 저는 항상 행복했어요!!</p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2013</h3><p>아이들 키우느라 너무 수고가 많아서 참 안쓰러웠어요. 서로 챙기기 어려웠지만 제 마음속에는 항상 당신이 있었어요.</p></div></div>
	<div class="event left"><div class="event-content glass fade">

        <h3>2014</h3><p>우리는 네 식구는 신나게 살았어요! </p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2015</h3><p>여전히 우리 앞에는 어려운 일들이 많았어요. 아이 키우는 것도 힘들고 돈도 없고 항상 부족했어요. 하지만 갈등이 많은 상황속에서도 저는 좋았던 기억만 있어요!!</p></div></div>

	<div class="event left"><div class="event-content glass fade">
        <h3>2016</h3><p>한마음교회에 가게 되었어요! 힘들었던 우리에게 새로운 삶이 시작되었어요!! 늦었지만 결혼식도 했어요!!! 잊을 수 없는 축복이 있는 결혼식이었어요! 반지를 손가락에 끼워줄 수 있어서 너무 감사했어요!! 그리고 셋째 화목이를 만났어요!!</p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2017</h3><p>이제는 세상을 의지하지 않고 주님을 의지하기 시작했어요! 이 안에서 우리의 관계를 재정립하는데에 어려움이 많았어요! 지금와서 보니 귀한 시간들이에요! 함께할 수 있어서 너무 좋았어요!</p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2018</h3><p>계속 되는 어려움과 갈등 속에서 끝까지 주님을 의지하고 성장했어요!! </p></div></div>
	<div class="event left"><div class="event-content glass fade">
        <h3>2019</h3><p>우리 앞의 어려움을 항상 존재했지만 우리는 하나가 되어 계속 성장하고 서로 사랑했어요!!</p></div></div>

	  <div class="event right"><div class="event-content glass fade">
        <h3>2020</h3><p>어려움이 극에 달했던 시간 같아요!! 하지만 저는 행복했어요! 고마워요!</p></div></div>

	<div class="event right"><div class="event-content glass fade">
        <h3>2021</h3><p>모든 어려움을 뚫고 우리가 한마음 한뜻이 되었던 한해였어요! 주와 공동체 안에서 우리의 관계가 새롭게 세워지는 시간이었던 것 같아요!</p></div></div>

	<div class="event right"><div class="event-content glass fade">
        <h3>2022</h3><p>함께해서 너무 좋았던 한해였어요!! 부족한 남편에게 당신은 없어서는 안되는 존재라는 것을 깨달았어요! 감사하고 사랑해요!!</p></div></div>

    <div class="event left"><div class="event-content glass fade">
        <h3>2023</h3><p>서로의 손을 놓지 않고, 매일이 선물처럼. 살고 싶어요!!</p></div></div>

	<div class="event left"><div class="event-content glass fade">
        <h3>2024</h3><p>저는 왜 이렇게 당신이 좋을까요? 물론 싸울때도 얼굴을 찡그릴때도 있지만 이상하게도 저는 좋았던 기억밖에 없어요!! 정말 신기해요! 주안에서 사랑이라는게 이런게 아닐까요??</p></div></div>

      <div class="event right"><div class="event-content glass fade">
        <h3>2025</h3><p>지금 이 순간도, 여전히 사랑 중이에요 ❤️ 앞으로 어떤 이야기가 펼쳐질까요? 항상 톡톡 튀고 각본없는 내 인생의 도파민 사랑해요! 저는 이제까지 다 좋았던 기억밖에 없어요! 함께 해줘서 너무 감사해요!!!</p></div></div>
    </div>
  </section>


<!-- 🎥 유튜브 카드 (새 탭 열림) -->
<div class="youtube-card">
  <a href="https://www.youtube.com/watch?v=egGG_AScMvs" target="_blank" class="youtube-link">
    <img src="https://img.youtube.com/vi/egGG_AScMvs/maxresdefault.jpg" alt="영상 보기" class="youtube-thumb">
    <div class="youtube-overlay"></div>
    <div class="youtube-play-icon">▶</div>
    <div class="youtube-caption">🎬 유튜브에서 영상 보기</div>
  </a>
</div>


  <!-- 📸 Gallery Section -->
<!-- 📸 Gallery Section -->
<section id="gallery" class="gallery" data-scene="gallery">
  <h2 class="section-title">📸 MEMORY GALLERY</h2>
  <div class="slider">
    <div class="slides">
      <img src="images/photo1.jpg" alt="photo1">
      <img src="images/photo2.jpg" alt="photo2">
      <img src="images/photo3.jpg" alt="photo3">
      <img src="images/photo4.jpg" alt="photo4">
      <!-- 복제 (끊김 없는 루프용) -->
      <img src="images/photo1.jpg" alt="photo1 copy">
      <img src="images/photo2.jpg" alt="photo2 copy">
      <img src="images/photo3.jpg" alt="photo3 copy">
      <img src="images/photo4.jpg" alt="photo4 copy">
    </div>
  </div>
</section>



  <!-- 💌 Message Section -->
  <section id="message" class="message" data-scene="message">
    <h2 class="section-title">💌 MESSAGE BOARD</h2>
    <textarea id="msgInput" placeholder="사랑의 메시지를 남겨주세요..."></textarea>
    <button id="saveBtn">저장하기</button>
    <ul id="msgList"></ul>
  </section>

  <!-- 🌙 Footer -->
  <footer>
    <p>© 2025 OUR LOVE STORY | Made with 💖 Magic & Memories</p>
  </footer>

  <!-- 🎵 배경음악 -->
  <audio id="bgMusic" loop autoplay muted>
    <source src="music/love-theme.mp3" type="audio/mpeg">
  </audio>
<!-- 🎹 인트로 피아노 효과음 (짧은 사운드) -->
<audio id="introSound" autoplay muted>
  <source src="music/intro-piano.mp3" type="audio/mpeg">
</audio>
  <!-- ✨ 스크립트: 로그인 처리 + 기존 script.js는 필요 시 남겨두고 여기서 병합 가능 -->
  <script>
    (function(){
      // === 설정: 여기에 하드코딩된 비밀번호를 입력하세요 ===
      const PASSWORD = '20070410'; // <-- 여기 변경
      const STORAGE_KEY = 'page_unlocked_v1';

      // === 오버레이 요소들 ===
      const overlay = document.getElementById('pw-overlay');
      const input = document.getElementById('pwField');
      const submitBtn = document.getElementById('pwSubmit');
      const err = document.getElementById('pwError');

      // 시도 제한
      let attempts = 0;
      const MAX_ATTEMPTS = 5;
      let lockedUntil = 0; // 타임스탬프

      // 오버레이 보이기/숨기기 함수
      function showOverlay(){
        overlay.classList.remove('hidden');
        overlay.setAttribute('aria-hidden', 'false');
        // 포커스 강제
        setTimeout(()=> input.focus(), 50);
        // 페이지 스크롤 잠금
        document.documentElement.style.overflow = 'hidden';
        document.body.style.overflow = 'hidden';
      }
      function hideOverlay(){
        overlay.classList.add('hidden');
        overlay.setAttribute('aria-hidden', 'true');
        document.documentElement.style.overflow = '';
        document.body.style.overflow = '';
      }

      // 언락 상태인지 체크
      function isUnlocked(){
        try {
          return localStorage.getItem(STORAGE_KEY) === '1';
        } catch(e){ return false; }
      }

      function setUnlocked(){
        try { localStorage.setItem(STORAGE_KEY, '1'); } catch(e){}
      }

      // 잠금 시간 남은지 체크
      function isLockedTemporarily(){
        return Date.now() < lockedUntil;
      }

      function updateError(text){
        err.textContent = text || '';
      }

      // 제출 처리
      function handleSubmit(){
        if (isLockedTemporarily()) {
          const sec = Math.ceil((lockedUntil - Date.now())/1000);
          updateError(`너무 많은 시도입니다. ${sec}초 후에 다시 시도하세요.`);
          return;
        }

        const val = input.value || '';
        if (val === PASSWORD) {
          setUnlocked();
          hideOverlay();
          updateError('');
          input.value = '';
        } else {
          attempts++;
          if (attempts >= MAX_ATTEMPTS) {
            // 30초 차단
            lockedUntil = Date.now() + 30_000;
            updateError('비밀번호가 틀렸습니다. 30초 동안 입력이 잠깁니다.');
            input.disabled = true;
            submitBtn.disabled = true;
            setTimeout(()=>{
              input.disabled = false;
              submitBtn.disabled = false;
              updateError('');
              attempts = 0;
            }, 30_000);
          } else {
            updateError(`비밀번호가 틀렸습니다. (${attempts}/${MAX_ATTEMPTS})`);
          }
          input.value = '';
          input.focus();
        }
      }

      // 엔터키로 제출
      input.addEventListener('keydown', function(e){
        if (e.key === 'Enter') {
          e.preventDefault();
          handleSubmit();
        }
      });
      submitBtn.addEventListener('click', handleSubmit);

      // 초기화: 언락 상태면 오버레이 숨기기
      if (isUnlocked()) {
        hideOverlay();
      } else {
        showOverlay();
      }

      // 접근성: 오버레이가 열린 상태에서 포커스가 밖으로 나가지 않게 최소한 보장
      document.addEventListener('focus', function(ev){
        if (!overlay.classList.contains('hidden')) {
          if (!overlay.contains(ev.target)) {
            ev.stopPropagation();
            input.focus();
          }
        }
      }, true);

      // (선택) 개발용: 콘솔에서 강제 해제하려면 localStorage.removeItem(STORAGE_KEY);
      // 예: localStorage.removeItem('page_unlocked_v1');

      // === 추가: 간단한 localStorage 기반 메시지 보드 기능 (원래 script.js가 없다면 기본 동작을 제공) ===
      try {
        const msgInput = document.getElementById('msgInput');
        const saveBtn = document.getElementById('saveBtn');
        const msgList = document.getElementById('msgList');
        const MSG_KEY = 'love_messages_v1';

        function renderMessages(){
          try {
            const arr = JSON.parse(localStorage.getItem(MSG_KEY) || '[]');
            msgList.innerHTML = '';
            arr.forEach((m, i) => {
              const li = document.createElement('li');
              li.textContent = m;
              msgList.appendChild(li);
            });
          } catch(e){}
        }

        saveBtn && saveBtn.addEventListener('click', () => {
          const val = msgInput.value && msgInput.value.trim();
          if (!val) return;
          try {
            const arr = JSON.parse(localStorage.getItem(MSG_KEY) || '[]');
            arr.unshift(val);
            localStorage.setItem(MSG_KEY, JSON.stringify(arr.slice(0, 100)));
            msgInput.value = '';
            renderMessages();
          } catch(e){}
        });
        renderMessages();
      } catch(e){ /* 안전하게 무시 */ }

      // === 추가: '오늘까지 며칠' 계산 (원래 페이지에 있던 #days 처리) ===
      try {
        const daysEl = document.getElementById('days');
        if (daysEl) {
          const start = new Date('2007-04-10T00:00:00'); // 시작일
          const now = new Date();
          const diff = Math.floor((now - start) / (24*60*60*1000));
          daysEl.textContent = diff.toLocaleString();
        }
      } catch(e){}
    })();
  </script>

  <!-- 기존 script.js를 그대로 사용하고 싶으면 아래 태그 유지 -->
  <script src="script.js"></script>
</body>
</html>
